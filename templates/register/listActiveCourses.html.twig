{% extends 'base.html.twig' %}

{% block title %}{{ 'title.activeCourses' | trans }}{% endblock %}

{% block body %}
   <h1 class="h2">{{'title.activeCourses' | trans }}</h1>
   <div class="container-fluid">
   {% if activeCourses is defined and activeCourses|length > 0 %}
      <table id="table" {{ stimulus_controller('table', {
         'exportName': 'courses',
      }) }}>
            <thead>
               <tr>
                  {% if app.request.locale == 'es' %}
                     <th data-sortable="true">{{"course.nameEs" | trans }}</th>
                     <th data-sortable="true">{{"course.turnEs" | trans }}</th>
                  {% else %}
                     <th data-sortable="true">{{"course.nameEu" | trans }}</th>
                     <th data-sortable="true">{{"course.turnEu" | trans }}</th>
                  {% endif %}
                  <th data-sortable="true">{{"course.inscriptionPeriod" | trans }}</th>
                  <th data-sortable="true">{{"course.places" | trans }}</th>
                  <th data-sortable="true">{{"course.inscriptions" | trans }}</th>
                  <th data-sortable="true">{{"course.cost" | trans }}</th>
                  {# <th data-sortable="true">{{"course.deposit" | trans }}</th> #}
                  <th data-sortable="true">{{"course.limitedPlaces" | trans }}</th>
                  <th data-sortable="true" data-field="options">{{"table.options" | trans }}</th>
               </tr>
            </thead>
            <tbody>
               {% for course in activeCourses %}
                  <tr>
                        {% if app.request.locale == 'es' %}
                           <td>{{course.nameEs}}</td>
                           <td>{{course.turnEs}}</td>
                        {% else %}
                           <td>{{course.nameEu}}</td>
                           <td>{{course.turnEu}}</td>
                        {% endif %}
                        <td>{{course.startDate | date('Y/m/d')}} - {{course.endDate | date('Y/m/d')}}</td>
                        <td>{{course.places is not null ? course.places: '' }}</td>
                        <td>{{course.registrations | length }}</td>
                        <td>{{course.cost != null ? course.cost | number_format(2, ',', '.')~' €' : '' }} </td>
                        {# <td>{{course.deposit != null ? course.deposit | number_format(2, ',', '.')~' €': '' }} </td> #}
                        <td>{{course.limitPlaces ? 'messages.si' | trans : 'messages.no' | trans }}</td>
                        <td>
                           {% if not (course.limitPlaces and course.registrations | length >= course.places) %}
                           <a href="{{ path ("app_register_new", {'course': course.id })}}"  title="{{ 'btn.register' | trans }}"
                              class="btn btn-primary">{{ 'btn.register' | trans }}
                           </a>
                           {% endif %}
                        </td>
                  </tr>
               {% endfor %}
            </tbody>
      </table>
   {% else %}
      <div class="mt-2 p-2 border border-black text-center bg-light">{{"messages.results0" | trans }}</div>
   {% endif %}
</div>
{% endblock %}
